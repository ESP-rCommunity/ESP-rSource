Steps in making a self extractor on a Mac

The self-extractor for ESP-r on a Mac is based on a package called 
makeself-2.1.4 (which also works on Linux and in the Cygwin environment
of Windows PCs). Makeself is a script which can be downloaded from
  and it allows a pre-compiled version of ESP-r to be extracted on
a users computer with minimal interaction.

First compile a standard version of esp-r (X11 version) in the standard location
which on OSX should be /opt/esru.

Second go to /opt/esru and clean up the subversion information in
the installed files via the follwing command:
  find . -name .svn -print >which_svn
  rm -rf `cat which_svn`

Then create a tar file of the bin docs esp-r lib and tutorial
folders (the example below includes a date string in the name of the tar file.

Create a folder /opt/precompiled_for_osx

sudo tar cf esp-r_X11_11.4_osx.tar bin esp-r lib tutorial

gzip -9 that tar file and move it into /opt/precompiled_for_osx.
  
Clear the standard source location:
 make clean

and compile a new GTK version of esp-r.
  ./Install --debug -d /opt/esru

Clean up the .svn in the installed location.

Clean up the compiled distribution via the following commands:
 cd /opt/esru
 find . -name .svn -print >which_svn
 rm -rf `cat which_svn`

Make a tar file and gzip it and place it in the 
precompiled_for_osx folder and edit the setup script to
include the specific name of the files that have been giziped.

In folder /opt/precompiled_for_osx along with the gziped tar files
there are several other files as follows:

License (text which is used to advise the user on license conditions.
setup_osx (a script which tells makeself.sh what to do during the extraction
      process.

The file that does most of the work is setup_osx.  This needs to be edited
slightly to include the specific ...tar.gz files.  The other
files are helper applications that setup_osx is going to copy.

The way that the self extractor is created is via a command similar
to the one below (adapt for your makeself.sh location):

sudo /users/jon/bin/makeself-2.1.4/makeself.sh precompiled_for_osx esp-r_v11.4_osx_precomp.run "ESP-r V11.4 distribution for OSX (/opt/esru)" ./setup_osx

The items are as follows makeself.sh is a general script that creates installers. makeself-2.1.4 can
be downloded from the web and it will create its own executables.  The command includes the full
path to where makeself.sh is located on your machine. The 2nd item is the name of the folder where
the files to be installed is located (as noted in the first step). The 3rd token is the name
of the 'run' file that is going to be created (a run file is the finished esp-r installer that
will be placed on the web). The string in quotes is a message that will be printed out when
the installer runs. And lastly ./setup_osx is the edited setup script within the precompiled_GTK_for_cygwin
folder. This script needs to have a chmod a+x done on it.

It is A REALLY GOOD IDEA to test use of the self-extractor on a clean machine.
