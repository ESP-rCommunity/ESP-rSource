Steps in making a self extractor on a Mac

The self-extractor for ESP-r on a Mac is based on a package called 
makeself-2.1.4 (which also works on Linux and in the Cygwin environment
of Windows PCs). Makeself is a script which can be downloaded from
  and it allows a pre-compiled version of ESP-r to be extracted on
a users computer with minimal interaction.

First compile a standard version of esp-r (X11 version) in the standard location
which on OSX should be /opt/esru.

  ./Install -d /opt/esru --compiler_version -3.3

Second go to /opt/esru and clean up the subversion information in
the installed files via the follwing command:
  find . -name .svn -print >which_svn
  rm -rf `cat which_svn`

Create a folder /opt/precompiled_for_osx

Then create a tar file of the esp-r folders (the example below 
includes a date string in the name of the tar file.

sudo tar cf esp-r_X11_11.5_osx.tar esp-r

gzip -9 that tar file and move it into /opt/precompiled_for_osx.

A similar process is taken for the GTK version.  

Either removed the /opt/esru/esp-r folder or at least
remove the executables from the /opt/esru/esp-r/bin folder.

Clear the source (via a make clean) and compile a new GTK 
version of esp-r.
  ./Install -d /opt/esru --compiler_version -3.3
 
Again remove the subversion files from the /opt/esru folders.

Create the tar file of the distribution and gzip it and
place it in the precompiled_for_osx folder. 

Edit the setup script to include the specific names of the 
tar files that have been giziped.

In folder /opt/precompiled_for_osx along with the gziped tar files
there are several other files as follows:

License (text which is used to advise the user on license conditions.
setup_osx (a script which tells makeself.sh what to do during the extraction
      process.

The file that does most of the work is setup_osx.  This needs to be edited
slightly to include the specific ...tar.gz files.  The other
files are helper applications that setup_osx is going to copy.

The way that the self extractor is created is via a command similar
to the one below (adapt for your makeself.sh location):

sudo /users/jon/bin/makeself-2.1.4/makeself.sh precompiled_for_osx esp-r_v11.5_osx_precomp.run "ESP-r V11.5 distribution for OSX (/opt/esru)" ./setup_osx

The items are as follows makeself.sh is a general script that creates installers. makeself-2.1.4 can
be downloded from the web and it will create its own executables.  The command includes the full
path to where makeself.sh is located on your machine. The 2nd item is the name of the folder where
the files to be installed is located (as noted in the first step). The 3rd token is the name
of the 'run' file that is going to be created (a run file is the finished esp-r installer that
will be placed on the web). The string in quotes is a message that will be printed out when
the installer runs. And lastly ./setup_osx is the edited setup script within the precompiled_GTK_for_cygwin
folder. This script needs to have a chmod a+x done on it.

It is A REALLY GOOD IDEA to test use of the self-extractor on a clean machine.
