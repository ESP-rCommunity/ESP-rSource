{\rtf1\ansi\ansicpg1252\cocoartf1671\cocoasubrtf600
{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fswiss\fcharset0 Helvetica-Bold;\f2\fmodern\fcharset0 Courier;
\f3\fswiss\fcharset0 Helvetica-Oblique;\f4\fmodern\fcharset0 Courier-Oblique;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}
{\list\listtemplateid2\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid101\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid2}
{\list\listtemplateid3\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid201\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid3}
{\list\listtemplateid4\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid301\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid4}
{\list\listtemplateid5\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid401\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid5}
{\list\listtemplateid6\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid501\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid6}
{\list\listtemplateid7\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid601\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid7}
{\list\listtemplateid8\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid701\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid8}
{\list\listtemplateid9\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid801\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid9}
{\list\listtemplateid10\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid901\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid10}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}{\listoverride\listid2\listoverridecount0\ls2}{\listoverride\listid3\listoverridecount0\ls3}{\listoverride\listid4\listoverridecount0\ls4}{\listoverride\listid5\listoverridecount0\ls5}{\listoverride\listid6\listoverridecount0\ls6}{\listoverride\listid7\listoverridecount0\ls7}{\listoverride\listid8\listoverridecount0\ls8}{\listoverride\listid9\listoverridecount0\ls9}{\listoverride\listid10\listoverridecount0\ls10}}
{\info
{\author jon}}\paperw11900\paperh16840\margl1440\margr1440\vieww16060\viewh14100\viewkind1
\deftab720
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\fs24 \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-77\qc\partightenfactor0

\f1\b \cf0 Notes on compiling ESP-r for Windows
\f0\b0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-87\qc\partightenfactor0
\cf0 20 Jan 2020\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-59\qc\partightenfactor0
\cf0 Jon W. Hand, ESRU, Glasgow, Scotland\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-83\partightenfactor0
\cf0 These notes are intended for ESP-r developers who wish to work with a 'native version' of ESP-r on computers running W7/W8/W10. There is also an alternative approach to running ESP-r on Windows computers via Cygwin (discussed elsewhere).  \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0  \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-102\partightenfactor0
\cf0 The Windows port of ESP-r uses the standard source distribution as well as the same GNU compiler suite as all other versions of ESP-r. To enable this compilation process and provide access to underlying operating system services we use MSYS2 which provides basic shell, make, and install utilities needed to support the Windows port of the GNU gcc, g++ and gfortran compilers. Reading this whole document prior to touching the keyboard is a REALLY GOOD IDEA.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Setting up MSYS2 and compilers
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-72\partightenfactor0
\cf0 Information about msys2 (minimal system for Windows) can be found at 
\f2\fs22 sourceforge.net/projects/msys2/
\f0\fs24 . 32bit and 64bit installers and instructions are found at 
\f2\fs22 msys2.org
\f0\fs24 . Other instructions can be found at 
\f2\fs22 https://github.com/msys2/msys2/wiki/MSYS2-installation
\f0\fs24 . Run the installer appropriate to your PC. When you are given the option to run msys2 \'96 say yes.  A new folder will appear on your C drive named either msys64 or msys32. A command window (with an M in the upper left corner) will start up and that is where you will be issuing most of your commands. Software within msys2 is managed by a package management tool called pacman. Its command line arguments are used to identify what is to be installed, updated or removed and it checks with a remote repository to determine dependencies for each \'91package\'92. Pacman was ported from Linux and works similar to package management such as apt-get on Linux. \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-79\partightenfactor0
\cf0 Pacman is also used to do the initial setup of msys2. To begin issue the following commands in the msys2 command window and press return:\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f2\fs22 \cf0 pacman -Syuu
\f3\i\fs24 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\i0 \cf0 \
When these tasks complete you will need to shutdown msys2 by typing 
\f3\i exit. 
\f1\i0\b \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f3\i\b0 \cf0 \
Restarting msys2\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-33\partightenfactor0

\f0\i0 \cf0 To complete the install of msys2 will require starting msys2. The sequence can also be used after the install process is complete.  Go to the Windows Start button and open up the 
\f3\i All programs
\f0\i0  tab and look for an entry with MSYS in the name e.g. MSYS2 64bit. Open this up and select MSYS2 Shell (you might also create a shortcut to this). \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
In the restarted msys2 command window give the commands:\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f2\fs22 \cf0 pacman -Syu
\f3\i\fs24 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\i0 \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-55\partightenfactor0
\cf0 This scans and recommends packages which can be updated. If it finds any agree to them and when that task completes do another restart of msys2. The next step installs software needed to compile applications from source. In the re-started command window give the following commands:\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-3118\partightenfactor0

\f2\fs22 \cf0 pacman -S nano make gettext base-devel subversion git net-utils\
pacman -S libxml2-devel libxslt-devel\
pacman -S gcc-fortran
\f4\i\fs24 \

\f3 \

\f0\i0 Next you need the compilers that can create native Windows executables. If your computer is 64bit do the following:\

\f2\fs22 pacman -S mingw-w64-x86_64-toolchain\
pacman -S mingw-w64-x86_64-gtk2
\f0\fs24 \
\
If your computer is 32bit do the following:
\f3\i \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f2\i0\fs22 \cf0 pacman -S mingw-w64-i686-toolchain\
pacman -S mingw-w64-i686-gtk2
\f0\fs24 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-52\partightenfactor0
\cf0 Several of these include multiple packages, use the 
\f3\i return
\f0\i0  key to signal that you want them all. You might have to use the 
\f3\i return
\f0\i0  key a couple of times to get all of the dependencies.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f3\i \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\i0\b \cf0 Windows & msys2\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\b0 \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-82\partightenfactor0
\cf0 Inside the C:\\msys64 or C:\\msys32 folder are a number of subfolders. Use Windows Explorer to have a look. The folder you are mostly interested in will be either C:\\msys64\\
\f3\i home 
\f0\i0 or C:\\
\f3\i msys32\\home
\f0\i0 . If your Windows login name is fred then there will be a folder C:\\msys64\\
\f3\i home\\fred 
\f0\i0 or C:\\
\f3\i msys32\\home\\fred
\f0\i0 . When you are working within the msys2 command window this is your location. Since Windows can view and copy and delete files within the msys2 folders you can use Explorer if you find that more convenient for file operations.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-51\partightenfactor0
\cf0 To view or edit the files acquired/generated with 
\f3\i ESP-r 
\f0\i0 a text editor is required \'96 Notepad++ is a better choice than Wordpad. Avoid notepad. Notepad++ is free and can open multiple files at the same time and is designed to work with ASCII text files. A web search will easily locate an installer for Notepad++.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-83\partightenfactor0
\cf0 To conclude setting up msys2 there are a number of folders which will be convenient to have in the \'91home\'92 folder. The following commands will take you to your home folder and then create folders for scripts, for Models and for the source code you will be working with.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
  
\f3\i cd\
  mkdir bin\
  mkdir Models\
  mkdir Src\

\f0\i0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-51\partightenfactor0
\cf0 The installer should include mingw32_shell or mingw64_shell batch files in the application selection. If not find them in C:\\msys64\\.  This starts a command window with an interpreter similar to bash and sh on a Linux computer. It may look a bit like a DOS window, but it has a more powerful syntax. The command window deals with text based commands and can run text based applications and scripts. For example the pattern matching tools grep and awk are available.  A subset of the standard commands you would find on a Linux computer are included (look in the C:\\msys64\\mingw64\\bin).\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-60\partightenfactor0
\cf0 Remember - in the MSYS command terminal use Linux commands.  Applications you start from within the MSYS command syntax are generally restricted to the executables within the C:msys64\\bin folder.  \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Setting environment variables
\f0\b0 \
 \
You will need to prepend to the Path environment  variable C:\\esp-r\\bin;C:\\msys64\\mingw64\\bin \
 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-69\partightenfactor0
\cf0 These paths assume that you are going to compile ESP-r and install the executables and databases and example models into C:\\esp-r. This avoids spaces in the paths to the files.  \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-61\partightenfactor0
\cf0 ESP-r needs a place to put new models as well as the results files generated by the simulator.  If you do not specify otherwise the default is C:\\Documents and Settings\\username (yuck).  Some people prefer to define a new environment variable HOMEPATH = C:\\esp-r\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Locals
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-70\partightenfactor0
\cf0 ESP-r uses a lot (~1 million lines) of Fortran (as well as C and C++). Fortran does not understand international character sets and it expects that real numbers use a period as a decimal place and that commas are used to separate items in a line. If your locale (France, Germany, Japan etc.) uses a 
\f1\b comma as a decimal point
\f0\b0  then ESP-r models 
\f1\b quickly become corrupted
\f0\b0 .  Choose something like a USA or UK or C locale.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Getting an ESP-r distribution
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-52\partightenfactor0
\cf0 Access to the ESP-r source distribution is typically via the ESRU ESP-r web site: a version control system called git. You need a git client and one of the pacman commands above installed one within the MSYS2 environment. There is a script that does the following with little interaction (download_and_install_most_current_ESP-r.bash). \
\
The following commands do the steps manually. In the Msys2 command window issue the following commands (you can cut and paste from this document into the Msys2 command window) we use ESPrgit as the folder name for the source distribution:\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f3\i \cf0   
\f4\fs20 cd\
 cd Src\
 mkdir ESPrgit\
 cd ESPrgit\
 git clone --recursive https://github.com/ESP-rCommunity/ESP-rSource.git\
 git clone --recursive https://github.com/ESP-rCommunity/ESP-rDatabases.git\
 git clone --recursive https://github.com/ESP-rCommunity/ESP-rModels.git\
 git clone --recursive https://github.com/ESP-rCommunity/ESP-rDoc.git
\f3\fs24 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\i0 \cf0 \
Then use rsync to get the contents of ESP-rDatabases, ESP-rModels, and ESP-rDoc in place before a full install can be carried out. Here are the steps assuming a folder ESP-rMaster is created:\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f3\i \cf0    
\f4\fs22 mkdir ESP-rMaster\
 rsync -av ESP-rSource/ ESP-rMaster/\
 rsync -av ESP-rDatabases/ ESP-rMaster/data/\
 rsync -av ESP-rDoc/ ESP-rMaster/doc/\
 rsync -av ESP-rModels/ ESP-rMaster/models/\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f0\i0\fs24 \cf0 \
In ESP-rMaster will be everything you need to fully build ESP-r.\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Compiling commands
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-64\partightenfactor0
\cf0 You can build ESP-r executables as console applications that can be run within a DOS or MSYS2 command window. You can also build ESP-r executables as graphic applications which can be run within a DOS or MSYS2 command window or (with the -mode text command line option) force the graphic application to run in text mode within a MSYS2 command window.  \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-62\partightenfactor0
\cf0 \
ESP-r as a graphical application is based on the GTK graphics libraries which where installed via the earlier pacman commands. Use the normal Install script (fast to compile but slow to run) or the faster executing Install_o1 script.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
 
\f2\fs22 ./Install -d C:/ESRU --gcc4 --debug
\f0\fs24 \
Or\
 
\f2\fs22 ./Install_o1 \'96d C:/ESRU \'96gcc4 --debug
\f0\fs24 \
\
There are a few choices in the script. Choose text or graphic, whether or not to include XML2 facilities and say yes to creating databases and example models if this is the first time you are compiling. The compilation process takes several minutes.\
\
You should then find a number of exe files have been placed in C:\\ESRU\\esp-r\\bin. Although the PATH update you did earlier should allow ESP-r executables to find the dll files needed you might find Windows complain about specific dll files not being found. You might have to manually copy a number of dll files from /mingw64/bin or /usr/bin to C:/ESRU/esp-r/bin from within the msys2 command window. Use the following as a guide :\
\
\pard\pardeftab720\ri0\partightenfactor0

\fs18 \cf0    cd /mingw64/bin\
   cp libgcc_s_seh-1.dll libwinpthread-1.dll C:/ESRU/esp-r/bin\
   cp libgfortran-3.dll libquadmath-0.dll C:/ESRU/esp-r/bin\
   cp libgdk-win32-2.0-0.dll libcairo-2.dll C:/ESRU/esp-r/bin\
   cp libfontconfig-1.dll libexpat-1.dll C:/ESRU/esp-r/bin\
   cp libfreetype-6.dll libbz2-1.dll C:/ESRU/esp-r/bin\
   cp libharfbuzz-0.dll libglib-2.0-0.dll C:/ESRU/esp-r/bin\
   cp libintl-8.dll libiconv-2.dll libpcre-1.dll C:/ESRU/esp-r/bin\
   cp libpng16-16.dll zlib1.dll libpixman-1-0.dll C:/ESRU/esp-r/bin\
   cp libgdk_pixbuf-2.0-0.dll libgio-2.0-0.dll C:/ESRU/esp-r/bin\
   cp libgmodule-2.0-0.dll libgobject-2.0-0.dll C:/ESRU/esp-r/bi\
   cp libgobject-2.0-0.dll libffi-6.dll C:/ESRU/esp-r/bin\
   cp libpango-1.0-0.dll libpangocairo-1.0-0.dll C:/ESRU/esp-r/bin\
   cp libpangoft2-1.0-0.dll libpangowin32-1.0-0.dll C:/ESRU/esp-r/bin\
   cp libgtk-win32-2.0-0.dll libatk-1.0-0.dll C:/ESRU/esp-r/bin\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\fs24 \cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-106\partightenfactor0
\cf0 If you want to use ESP-r for production work driven by scripts within the msys2 command window you need only to add \'96mode text to the command invocation. If you want to work from a DOS command window you will need to compile a pure-text based application. Some users do an initial compile as pure-text and include the databases and example models. Then they issue a 
\f3\i make clean
\f0\i0  command from within the \'91src\'92 folder and do a second ./Install for the graphic version of the executables.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-107\partightenfactor0
\cf0 Note: the ESP-r Install script should detect that the compilation is being done on a Native Windows computer, if it does not select native windows from the options listed.  When you are finished using MSYS type 'exit' in the MSYS command window.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 Using ESP-r
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-40\partightenfactor0
\cf0 Assuming your Install task worked you will now have an ESP-r distribution on your computer.  The native windows version of ESP-r is a graphic application which is normally invoked from within Windows rather than from within MSYS.  The exception would scripted production work or if you wanted to use the GNU debugger gdb and this should be run from within MSYS and from the folder with the source code and executable.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-72\partightenfactor0
\cf0 There are many ways to use these executables and example models and one pattern which works well for many users is listed below:\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
a) Create a folder for simulation models.  Good places are C:\\Esru\\Models or C:Users\\your_name\\Models\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-37\partightenfactor0
\cf0 b) Create an association between model configuration files (*.cfg) and the 
\f2 esp-r.cmd
\f0  file found in C:\\ESRU\\esp-r\\bin  One way to do this is to use Windows explorer and find the training folder e.g. C:\\ESRU\\esp-r\\training  and locate a model folder and then its cfg folder and right click on a file ending in .cfg  Associate it with the esp-r.cmd file and then try clicking on the cfg file to see if the ESP-r project manager starts up.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-39\partightenfactor0
\cf0 c) Make a habit of opening up existing models by using Windows Explorer to go into the cfg folder of the model and clicking on the model cfg file. This will ensure that all of your work is 'local' to the model.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri-47\partightenfactor0
\cf0 d) copy the esp-r.cmd file into the Models folder (from step a).  You can click on this if you want to create a new model in your Models folder.\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0

\f1\b \cf0 \
Hints
\f0\b0 \
 \
A few hints for use of ESP-r on Windows machines: \
\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-37\partightenfactor0
\ls1\ilvl0\cf0 \'95	path lengths in ESP-r are limited and to ensure that model file names are not truncated you should place models in a location such as C:\\Esru\\Models or C:\\Users\\user_name\\Models would be good locations. \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-122\partightenfactor0
\ls2\ilvl0\cf0 \'95	Note that when you select existing models from the project model exemplars list you have an option to specify where the model will be placed. Avoid paths with spaces and long paths.\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-76\partightenfactor0
\ls3\ilvl0\cf0 \'95	Enable an association between model .cfg files and the C:\\Esru\\esp-r\\esp-r.cmd file.  Then you can use Windows Explorer to click on model cfg files and automatically start the ESP-r Project Manager.  You can also copy the esp-r.cmd file to a folder where you want to create new models (e.g. c:\\Esru\\Models) and then you can click on that cmd file to start up ESP-r. \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-83\partightenfactor0
\ls4\ilvl0\cf0 \'95	ESP-r assumes that real numbers use a . to mark decimal places and that a comma is a token separator. It gets seriously confused in locales where decimals are defined with commas. Please switch locales 
\f1\b before
\f0\b0  running ESP-r. \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\tx10016\pardeftab720\li720\fi-720\ri-77\partightenfactor0
\ls5\ilvl0\cf0 \'95	ESP-r assumes that so-called corporate databases can not be overwritten by normal users of ESP-r.  On Windows machines this protection does not exist and can cause potential problems. Make a backup of the distribution databases and climate folders just to be safe.\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-73\partightenfactor0
\ls6\ilvl0\cf0 \'95	The Windows version lacks some facilities available on other operating systems (e.g. click-on-bitmap, select via mouse). When the unexpected happens we urge you to forward comments to Jon Hand (jon@esru.strath.ac.uk) \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-44\partightenfactor0
\ls7\ilvl0\cf0 \'95	ESP-r evolves so use svn or git commands to update your distribution. More information on subversion and git commands can be found in the ESP-r Developers Guide download site for updates. \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-100\partightenfactor0
\ls8\ilvl0\cf0 \'95	ESP-r has few 'undo' options. So for your own protection make regular backups of your work.  How to make backups?  Use a tool such as WinZip or 7-zip and right click on the top level folder of the model to create a compressed archive.  Do this often.  If possible give the compressed archive a name that helps you remember which version of the model is held in the archive.\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri-35\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri-35\partightenfactor0
\ls9\ilvl0\cf0 \'95	If you want to transfer a model to a different computer or a computer with a different operating system then you may need to use one of the scripts found in the source code distribution bin folder such as Linux_model_to_dos or dos_model_to_linux.\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\ri0\partightenfactor0
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720\ri0\partightenfactor0
\ls10\ilvl0\cf0 \'95	Join the ESP-r community and send your questions to esp-r@lists.strath.ac.uk!\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\ri0\partightenfactor0
\cf0 \
\
\
}